# Phase 6: Architecture & Flow Diagrams

**Purpose**: Visual reference for Phase 6 implementation  
**Format**: ASCII diagrams and flow charts  

---

## ðŸ“Š System Architecture Overview

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    PHASE 6: ADVANCED ERROR HANDLING              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   React Component   â”‚
â”‚  (Dashboard, Form)  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
           â”œâ”€â”€â”€ useRetry() hook
           â”‚
           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚      Retry Logic Handler             â”‚
â”‚  (exponential backoff + jitter)      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
           â”œâ”€â”€â”€ isRetryableError()?
           â”‚
           â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ Retryable?   â”‚
    â””â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”˜
       â”‚       â”‚
      YES     NO
       â”‚       â”‚
       â–¼       â–¼
   â”Œâ”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”
   â”‚AUTOâ”‚  â”‚SHOW  â”‚
   â”‚RETRY  â”‚ERROR â”‚
   â””â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â”œâ”€ Calculate exponential backoff
       â”‚
       â”œâ”€ Show RetryAlert (countdown)
       â”‚
       â”œâ”€ Wait N seconds
       â”‚
       â”œâ”€ Attempt API call
       â”‚
       â””â”€ Success? â”€â”€YESâ”€â”€> Show SuccessAlert
                    â”‚
                    NO
                     â”‚
          Max attempts? â”€â”€YESâ”€â”€> Show ErrorRecoveryAlert
                    â”‚            (final failure)
                    NO
                     â”‚
            Retry again (loop back)
```

---

## ðŸ”„ Retry Flow Diagram

```
User Action (e.g., "Create Trip")
           â”‚
           â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚  API Call   â”‚ â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ (try #1)    â”‚               â”‚
    â””â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”˜               â”‚
       â”‚      â”‚                   â”‚
     SUCCESS  ERROR               â”‚
       â”‚      â”‚                   â”‚
       â–¼      â””â”€ Retryable? â”€â”€NOâ”€â”â”‚
    DONE        â”‚                 â”‚
               YES                â”‚
                â”‚                 â”‚
                â–¼                 â”‚
            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚
            â”‚ Calculateâ”‚          â”‚
            â”‚ Delay    â”‚          â”‚
            â”‚ (exp.    â”‚          â”‚
            â”‚ backoff) â”‚          â”‚
            â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜          â”‚
                 â”‚                â”‚
                 â–¼                â”‚
            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚
            â”‚ Show     â”‚          â”‚
            â”‚ Countdownâ”‚          â”‚
            â”‚ Alert    â”‚          â”‚
            â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜          â”‚
                 â”‚                â”‚
            â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
            â”‚  Wait N seconds
            â”‚  (User can cancel)
            â”‚
            â–¼
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚ API Call   â”‚ â—„â”€â”€â”€â”€â”€â”
        â”‚ (try #N)   â”‚       â”‚
        â””â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”˜       â”‚
           â”‚      â”‚          â”‚
         SUCCESS  ERROR      â”‚
           â”‚      â”‚          â”‚
           â–¼      â””â”€ Retry? â”€â”˜
        DONE
```

---

## ðŸŽ¯ Component Interaction Diagram

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     USER INTERFACE LAYER                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”               â”‚
â”‚  â”‚ RetryAlert      â”‚      â”‚ ErrorRecovery    â”‚               â”‚
â”‚  â”‚ - Countdown     â”‚      â”‚ Alert            â”‚               â”‚
â”‚  â”‚ - Progress      â”‚      â”‚ - Error message  â”‚               â”‚
â”‚  â”‚ - Cancel button â”‚      â”‚ - Retry button   â”‚               â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜               â”‚
â”‚           â”‚                         â”‚                         â”‚
â”‚           â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                         â”‚
â”‚                    â”‚                                          â”‚
â”‚              â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”                                   â”‚
â”‚              â”‚ SuccessAlertâ”‚                                  â”‚
â”‚              â”‚ - Message   â”‚                                  â”‚
â”‚              â”‚ - Auto-closeâ”‚                                  â”‚
â”‚              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                  â”‚
â”‚                                                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â”‚
                    â”‚ (props: isVisible, data, callbacks)
                    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      HOOKS LAYER (React)                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ useRetry() Hook                                        â”‚  â”‚
â”‚  â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚  â”‚
â”‚  â”‚ Returns:                                               â”‚  â”‚
â”‚  â”‚ - retry()     : Main function to retry operations     â”‚  â”‚
â”‚  â”‚ - cancel()    : Cancel active retry                   â”‚  â”‚
â”‚  â”‚ - isRetrying  : Boolean state                          â”‚  â”‚
â”‚  â”‚ - retryCount  : Current attempt number                â”‚  â”‚
â”‚  â”‚ - lastError   : Error from last attempt               â”‚  â”‚
â”‚  â”‚                                                        â”‚  â”‚
â”‚  â”‚ Shows: Toast notifications on retry/success/failure   â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚           â”‚                                                  â”‚
â”‚           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚                         â”‚                              â”‚     â”‚
â”‚                  â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”                 â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”  â”‚
â”‚                  â”‚ useAsync() â”‚                 â”‚Toast    â”‚  â”‚
â”‚                  â”‚ Hook       â”‚                 â”‚Notif.   â”‚  â”‚
â”‚                  â”‚ (for data  â”‚                 â”‚         â”‚  â”‚
â”‚                  â”‚  fetching) â”‚                 â”‚- Successâ”‚  â”‚
â”‚                  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                 â”‚- Error  â”‚  â”‚
â”‚                                                 â”‚- Retry  â”‚  â”‚
â”‚                                                 â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â”‚
                    â”‚ (calls)
                    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    UTILITIES LAYER                            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ retryHandler.js                                      â”‚   â”‚
â”‚  â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚   â”‚
â”‚  â”‚ - retryWithExponentialBackoff()  : Main retry logic  â”‚   â”‚
â”‚  â”‚ - isRetryableError()             : Error classifier â”‚   â”‚
â”‚  â”‚ - calculateDelay()               : Backoff calc      â”‚   â”‚
â”‚  â”‚ - RetryConfig class              : State management  â”‚   â”‚
â”‚  â”‚ - createRetryablePromise()       : Promise wrapper   â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â”‚
                    â”‚ (API calls)
                    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      API/BACKEND LAYER                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ HTTP Requests â†’ Backend API                                   â”‚
â”‚ Errors: 429, 502, 503, 504, Network Errors                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## â±ï¸ Exponential Backoff Timeline Diagram

```
Attempt #1:
â”‚ API Call (immediate)
â”‚
â””â”€ Success? â”€YESâ”€> Done
              NO
               â”‚
Attempt #2:  Wait 1 second (Â±100ms jitter)
â”‚
â”œâ”€ API Call
â”‚
â””â”€ Success? â”€YESâ”€> Done
              NO
               â”‚
Attempt #3:  Wait 2 seconds (Â±200ms jitter)
â”‚
â”œâ”€ API Call
â”‚
â””â”€ Success? â”€YESâ”€> Done
              NO
               â”‚
Attempt #4:  Wait 4 seconds (Â±400ms jitter)
â”‚
â”œâ”€ API Call
â”‚
â””â”€ Success? â”€YESâ”€> Done
              NO
               â”‚
Attempt #5:  Wait 8 seconds (Â±800ms jitter)
â”‚
â”œâ”€ API Call
â”‚
â””â”€ Success? â”€YESâ”€> Done
              NO
               â”‚
(Continue until maxAttempts reached or success)

Delay Formula: min(1000 * (2 ^ (n-1)) + jitter, 30000) ms
where n = attempt number
```

---

## ðŸ” Error Classification Diagram

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Error Occurs â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Is it a Network Error?   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ - ECONNREFUSED           â”‚ â”€â”€YESâ”€â”€â”
â”‚ - ETIMEDOUT              â”‚        â”‚
â”‚ - ENOTFOUND              â”‚        â”‚
â”‚ - ENETUNREACH            â”‚        â”‚
â”‚ - ECONNRESET             â”‚        â”‚
â”‚ - Failed to fetch        â”‚        â”‚
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚
     â”‚                              â”‚
     NO                             â”‚
     â”‚                              â”‚
     â–¼                              â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚
â”‚ Is it a Retryable Status?â”‚        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤        â”‚
â”‚ - 429 Too Many Requests  â”‚ â”€â”€YESâ”€â”€â”¤
â”‚ - 502 Bad Gateway        â”‚        â”‚
â”‚ - 503 Service Unavailableâ”‚        â”‚
â”‚ - 504 Gateway Timeout    â”‚        â”‚
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚
     â”‚                              â”‚
     NO                             â”‚
     â”‚                              â”‚
     â–¼                              â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚
â”‚ Non-Retryable Error      â”‚        â”‚
â”‚ - 400 Bad Request        â”‚        â”‚
â”‚ - 401 Unauthorized       â”‚        â”‚
â”‚ - 403 Forbidden          â”‚        â”‚
â”‚ - 404 Not Found          â”‚        â”‚
â”‚ - 409 Conflict           â”‚        â”‚
â”‚                          â”‚        â”‚
â”‚ â†’ Show Error Immediately â”‚        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚
                                    â”‚
                                    â–¼
                          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                          â”‚ Retryable Error  â”‚
                          â”‚                  â”‚
                          â”‚ â†’ Auto-Retry     â”‚
                          â”‚ â†’ Show Countdown â”‚
                          â”‚ â†’ Allow Cancel   â”‚
                          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ðŸŽ¨ UI State Diagram

```
                        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                        â”‚ Initial     â”‚
                        â”‚ State       â”‚
                        â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
                               â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚                     â”‚
                    â–¼                     â–¼
           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
           â”‚ Normal State    â”‚   â”‚ API Call     â”‚
           â”‚ - No alerts     â”‚   â”‚ In Progress  â”‚
           â”‚ - Show form     â”‚   â”‚ - Button     â”‚
           â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚   disabled   â”‚
                    â”‚            â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
             User clicks                 â”‚
             button: Call API            â”‚
                    â”‚                    â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                               â”‚
                               â–¼
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚ API Response Check â”‚
                    â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
                         â”‚        â”‚
                       SUCCESS  FAILURE
                         â”‚        â”‚
                         â–¼        â–¼
                    â”Œâ”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚ Show â”‚  â”‚Retryable?    â”‚
                    â”‚Success  â”œâ”€â”€â”¬â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”˜
                    â”‚Alert â”‚  â”‚  â”‚      â”‚
                    â””â”€â”€â”€â”€â”€â”€â”˜  YES NO    â”‚
                         â”‚   â”‚  â”‚       â”‚
              Auto-Close â”‚   â”‚  â”‚       â–¼
              after 3s   â”‚   â”‚  â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                         â”‚   â”‚  â”‚   â”‚Show Error    â”‚
                         â–¼   â”‚  â”‚   â”‚Recovery      â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â” â”‚  â”‚   â”‚Alert         â”‚
                    â”‚Done  â”‚ â”‚  â”‚   â”‚(non-retry)   â”‚
                    â””â”€â”€â”€â”€â”€â”€â”˜ â”‚  â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â”‚  â”‚
                             â”‚  â–¼
                          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                          â”‚Show Retry Alert  â”‚
                          â”‚- Countdown       â”‚
                          â”‚- Progress        â”‚
                          â”‚- Cancel Button   â”‚
                          â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                 â”‚
                        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”
                        â”‚                 â”‚
                    Countdown         User Clicks
                    Ends              Cancel
                        â”‚                 â”‚
                        â–¼                 â–¼
                  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                  â”‚ Retry API  â”‚   â”‚Hide Retry   â”‚
                  â”‚ Call Again â”‚   â”‚Alert, Show  â”‚
                  â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜   â”‚Error        â”‚
                        â”‚          â”‚Recovery    â”‚
                        â–¼          â”‚Alert       â”‚
              (back to Success/    â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
               Failure check)            â”‚
                                   User Clicks
                                   "Retry"
                                         â”‚
                                    (API Call)
```

---

## ðŸ”— Integration Points Diagram

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   DASHBOARD INTEGRATION POINTS                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

1. DISPATCHER DASHBOARD
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚ DispatcherDashboard.jsx             â”‚
   â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
   â”‚ - handleAssignDriver() â”€â”€â”€â”          â”‚
   â”‚ - handleStartTrip()    â”€â”€â”€â”¤ Wrap     â”‚
   â”‚ - handleCompleteTrip() â”€â”€â”€â”¤ with     â”‚
   â”‚ - fetchTrips()         â”€â”€â”€â”¤ retry()  â”‚
   â”‚ - fetchDrivers()       â”€â”€â”€â”˜          â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                â”‚
                â”‚ Add hooks & alerts
                â–¼
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚ + useRetry()                        â”‚
   â”‚ + RetryAlert component              â”‚
   â”‚ + ErrorRecoveryAlert component      â”‚
   â”‚ + ErrorBoundary wrapper             â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

2. SCHEDULER DASHBOARD
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚ SchedulerDashboard.jsx              â”‚
   â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
   â”‚ - handleCreateSchedule() â”€â”€â”        â”‚
   â”‚ - handleUpdateSchedule() â”€â”€â”¤ Wrap   â”‚
   â”‚ - handleDeleteSchedule() â”€â”€â”¤ with   â”‚
   â”‚ - handleCreateTrip()    â”€â”€â”¤ retry() â”‚
   â”‚ - fetchSchedules()      â”€â”€â”¤        â”‚
   â”‚ - fetchTrips()          â”€â”€â”˜        â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                â”‚
                â”‚ Add hooks & alerts
                â–¼
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚ + useRetry()                        â”‚
   â”‚ + RetryAlert component              â”‚
   â”‚ + ErrorRecoveryAlert component      â”‚
   â”‚ + ErrorBoundary wrapper             â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

3. DRIVER DASHBOARD
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚ ComprehensiveDriverDashboard.jsx    â”‚
   â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
   â”‚ - handleUpdateLocation() â”€â”€â”€â”       â”‚
   â”‚ - handleStartTrip()      â”€â”€â”€â”¤ Wrap  â”‚
   â”‚ - handleCompleteTrip()   â”€â”€â”€â”¤ with  â”‚
   â”‚ - handleAcceptTrip()     â”€â”€â”€â”¤ retry()â”‚
   â”‚ - fetchTrips()           â”€â”€â”€â”¤       â”‚
   â”‚ - fetchCurrentLocation() â”€â”€â”€â”˜       â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                â”‚
                â”‚ Add hooks & alerts
                â–¼
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚ + useRetry()                        â”‚
   â”‚ + RetryAlert component              â”‚
   â”‚ + ErrorRecoveryAlert component      â”‚
   â”‚ + ErrorBoundary wrapper             â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ðŸ“ˆ Performance Impact Timeline

```
Without Retry Logic:
API Call (fail) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€> Error (immediate)
                   <1ms

With Retry Logic:
API Call (fail) â”€â”€> Detect Error â”€â”€> Calculate Delay â”€â”€> Show Alert
      <1ms                <1ms             <1ms            2-5ms
                                              â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â”‚
                    â–¼
            Wait N seconds (no CPU)
                    â”‚
                    â–¼
          API Call Again â”€â”€> Success (or retry again)
                <1ms

Total Overhead:
- Detection: <1ms
- Calculation: <1ms
- Alert rendering: 2-5ms
- Total: <10ms per retry cycle
```

---

## âœ… Success Criteria Matrix

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ FEATURE                        â”‚ EXPECTED      â”‚ ACTUAL     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ API call succeeds              â”‚ Immediate     â”‚ â”€â”€â”€â”€â”€      â”‚
â”‚ Transient error (503)          â”‚ Retry 3x      â”‚ â”€â”€â”€â”€â”€      â”‚
â”‚ Max retries exceeded           â”‚ Show error    â”‚ â”€â”€â”€â”€â”€      â”‚
â”‚ User cancels retry             â”‚ Stop retry    â”‚ â”€â”€â”€â”€â”€      â”‚
â”‚ RetryAlert countdown           â”‚ 3-2-1-0       â”‚ â”€â”€â”€â”€â”€      â”‚
â”‚ ErrorRecoveryAlert shows       â”‚ On failure    â”‚ â”€â”€â”€â”€â”€      â”‚
â”‚ SuccessAlert auto-closes       â”‚ After 3s      â”‚ â”€â”€â”€â”€â”€      â”‚
â”‚ Toast notifications            â”‚ Show/hide     â”‚ â”€â”€â”€â”€â”€      â”‚
â”‚ ErrorBoundary catches errors   â”‚ Fallback      â”‚ â”€â”€â”€â”€â”€      â”‚
â”‚ Keyboard accessible (Tab)      â”‚ All buttons   â”‚ â”€â”€â”€â”€â”€      â”‚
â”‚ Button heights (44px)          â”‚ WCAG AA       â”‚ â”€â”€â”€â”€â”€      â”‚
â”‚ Mobile responsive              â”‚ Adapts        â”‚ â”€â”€â”€â”€â”€      â”‚
â”‚ No console errors              â”‚ Clean         â”‚ â”€â”€â”€â”€â”€      â”‚
â”‚ No memory leaks                â”‚ Stable        â”‚ â”€â”€â”€â”€â”€      â”‚
â”‚ Performance <10ms              â”‚ Fast          â”‚ â”€â”€â”€â”€â”€      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ðŸ”„ Phase Progression Diagram

```
PHASE 1: Console Removal
â”‚ âœ… COMPLETE
â”‚
PHASE 2: Input Validation
â”‚ âœ… COMPLETE
â”‚
PHASE 3: Error Handling Utility
â”‚ âœ… COMPLETE
â”‚
PHASE 4: Button Heights (44px)
â”‚ âœ… COMPLETE
â”‚
PHASE 5: Backend Validation
â”‚ âœ… COMPLETE
â”‚
PHASE 6: Advanced Error Handling (THIS PHASE)
â”‚ âœ… INFRASTRUCTURE COMPLETE
â”‚ â–¼
â”‚ ðŸ”„ DASHBOARD INTEGRATION (PENDING)
â”‚ â””â”€ Dispatcher Dashboard
â”‚ â””â”€ Scheduler Dashboard
â”‚ â””â”€ Driver Dashboard
â”‚ â–¼
â”‚ ðŸ§ª TESTING & VALIDATION (PENDING)
â”‚
PHASE 7: Mobile Responsiveness
â”‚ â³ PENDING
â”‚
ðŸŽ‰ PRODUCTION READY
```

---

## ðŸ“ Legend

```
âœ… Complete
ðŸ”„ In Progress
â³ Pending
âŒ Failed
ðŸŸ¢ Ready
ðŸŸ¡ Caution
ðŸ”´ Critical
```

---

**These diagrams provide visual references for:**
- System architecture
- Data flow
- Component interactions
- Error handling
- UI state transitions
- Integration points
- Progress tracking

Use these when explaining Phase 6 to team members or for documentation purposes.
